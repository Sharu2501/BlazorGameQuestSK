@using BlazorGame.Client.Services
<div class="side-menu">
    <nav>
        @if (AuthService.IsAuthenticated)
        {
            <NavLink href="/home" class="menu-item" Match="NavLinkMatch.All">
                <i class="bi bi-controller"></i>
                <span>Nouvelle partie</span>
            </NavLink>

            <NavLink href="/scores" class="menu-item" Match="NavLinkMatch.All">
                <i class="bi bi-bar-chart-fill"></i>
                <span>Scores</span>
            </NavLink>
            
            <NavLink href="/game-rules" class="menu-item" Match="NavLinkMatch.All">
                <i class="bi bi-journal-text"></i>
                <span>Règles du jeu</span>
            </NavLink>

            <NavLink href="/logout" class="menu-item" Match="NavLinkMatch.All">
                <i class="bi bi-box-arrow-right"></i>
                <span>Déconnexion</span>
            </NavLink>
        }
    </nav>
</div>

@inject AuthService AuthService

@code {
    protected override void OnInitialized()
    {
        AuthService.OnAuthStateChanged += StateHasChanged;
    }

    public void Dispose()
    {
        AuthService.OnAuthStateChanged -= StateHasChanged;
    }
}

<style scoped>
    .navbar-brand {
        display: flex;
        align-items: center;
        gap: 10px;
        transition: filter 0.3s ease, transform 0.3s ease;
    }

    .navbar-brand.active-page {
        filter: brightness(0.6);
        animation: pulse 1.5s infinite alternate;
    }

    @@keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    .navbar-logo {
        width: 40px;
        height: 40px;
    }

    .side-menu {
        position: fixed;
        left: 0;
        height:100vh;
        width: 60px;
        background-color: rgba(60, 59, 59, 0.189);
        backdrop-filter: blur(4px);
        overflow-x: visible;
        transition: width 0.3s ease, background-color 0.3s ease;
        z-index: 999;
    }

    .side-menu:hover {
        width: auto;
        background-color: rgba(0,0,0,0.2);
        backdrop-filter: blur(4px);
    }

    .side-menu nav {
        display: flex;
        flex-direction: column;
        padding: 1rem 0;
    }

    .menu-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 0.6rem 1rem;
        color: white;
        text-decoration: none;
        white-space: nowrap;
        font-weight: 500;
        font-size: 0.9rem;
        transition: background 0.3s ease, color 0.3s ease;
        border-radius: 6px;
    }

    .menu-item:hover:not(.active),
    .menu-item.active {
        background-color: #7e25257b;
        color: #fff;
    }

    .side-menu span {
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .side-menu:hover span {
        opacity: 1;
    }

    .main-content {
        margin-left: 60px;
        margin-top: 60px;
        transition: margin-left 0.3s ease;
        padding: 1rem;
        color: white;
    }

    .side-menu:hover ~ .main-content {
        margin-left: max-content;
    }

    @@media (max-width: 768px) {
        .side-menu {
            width: 50px;
        }

        .side-menu:hover {
            width: auto;
        }

        .main-content {
            margin-left: 50px;
        }

        .side-menu:hover ~ .main-content {
            margin-left: max-content;
        }
    }
</style>